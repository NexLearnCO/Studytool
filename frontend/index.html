<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NexLearn AI 筆記生成器</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/unified-styles.css">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Markmap for mindmap -->
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdn.jsdelivr.net/npm/markmap-lib@0.15.3"></script>
    <script src="https://cdn.jsdelivr.net/npm/markmap-view@0.15.3"></script>
    
    <!-- Marked for markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <h1>NexLearn AI 筆記生成器</h1>
                <span class="subtitle">將任何內容轉換為智能學習筆記</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Modern Unified Input Section -->
            <section class="unified-input-section">
                <!-- Header with Course Selection -->
                <div class="course-header">
                    <div class="course-selection">
                        <label for="course-select">📚 課程分類：</label>
                        <select id="course-select" class="course-dropdown">
                            <option value="">選擇課程類別...</option>
                            <option value="chemistry">🧪 化學 Chemistry</option>
                            <option value="physics">⚗️ 物理 Physics</option>
                            <option value="biology">🧬 生物 Biology</option>
                            <option value="mathematics">📊 數學 Mathematics</option>
                            <option value="computer-science">💻 計算機科學 Computer Science</option>
                            <option value="business">💼 商業 Business</option>
                            <option value="literature">📖 文學 Literature</option>
                            <option value="history">🏛️ 歷史 History</option>
                            <option value="languages">🌐 語言學習 Languages</option>
                            <option value="other">📋 其他 Other</option>
                        </select>
                    </div>
                    
                    <div class="note-title">
                        <label for="note-title-input">📝 筆記標題：</label>
                        <input type="text" id="note-title-input" class="title-input" placeholder="輸入筆記標題...">
                    </div>
                </div>

                <!-- Upload Sources Area -->
                <div class="upload-sources-area">
                    <h3>📤 上傳學習資源</h3>
                    <div class="sources-container">
                        <!-- YouTube Sources -->
                        <div class="source-group">
                            <div class="source-header">
                                <i class="fab fa-youtube youtube-icon"></i>
                                <span>YouTube 影片</span>
                                <button class="add-source-btn" data-type="youtube">+ 添加</button>
                            </div>
                            <div id="youtube-sources" class="sources-list">
                                <div class="source-item">
                                    <input type="text" class="youtube-url-input" placeholder="貼上 YouTube 影片網址...">
                                    <button class="remove-source-btn">×</button>
                                </div>
                            </div>
                        </div>

                        <!-- File Sources -->
                        <div class="source-group">
                            <div class="source-header">
                                <i class="fas fa-file-upload file-icon"></i>
                                <span>文件上傳</span>
                                <button class="add-source-btn" data-type="file">+ 添加</button>
                            </div>
                            <div class="file-upload-zone">
                                <input type="file" id="file-input" multiple accept=".pdf,.doc,.docx,.ppt,.pptx,.txt,.md,.mp3,.m4a,.wav,.jpg,.jpeg,.png" hidden>
                                <label for="file-input" class="file-drop-area">
                                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                                    <div class="upload-text">
                                        <strong>點擊選擇文件或拖放到此處</strong>
                                        <p>支援：PDF, DOC, PPT, TXT, MD, MP3, M4A, WAV, 圖片</p>
                                    </div>
                                </label>
                                <div id="file-list" class="file-list"></div>
                            </div>
                        </div>

                        <!-- Text Sources -->
                        <div class="source-group">
                            <div class="source-header">
                                <i class="fas fa-align-left text-icon"></i>
                                <span>文字內容</span>
                                <button class="add-source-btn" data-type="text">+ 添加</button>
                            </div>
                            <div id="text-sources" class="sources-list">
                                <div class="source-item">
                                    <textarea class="text-content-input" placeholder="貼上或輸入文字內容..." rows="4"></textarea>
                                    <button class="remove-source-btn">×</button>
                                </div>
                            </div>
                        </div>

                        <!-- Webpage Sources -->
                        <div class="source-group">
                            <div class="source-header">
                                <i class="fas fa-globe web-icon"></i>
                                <span>網頁連結</span>
                                <button class="add-source-btn" data-type="webpage">+ 添加</button>
                            </div>
                            <div id="webpage-sources" class="sources-list">
                                <div class="source-item">
                                    <input type="text" class="webpage-url-input" placeholder="貼上網頁連結...">
                                    <button class="remove-source-btn">×</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Section -->
                <div class="generation-settings">
                    <div class="settings-row">
                        <!-- Detail Level -->
                        <div class="setting-group">
                            <label>🎯 詳細程度：</label>
                            <div class="detail-buttons">
                                <button class="detail-btn" data-level="brief">簡要</button>
                                <button class="detail-btn active" data-level="medium">適中</button>
                                <button class="detail-btn" data-level="detailed">詳細</button>
                            </div>
                        </div>

                        <!-- Language Selection -->
                        <div class="setting-group">
                            <label>🌐 輸出語言：</label>
                            <div class="language-buttons">
                                <button class="lang-btn" data-lang="en">English</button>
                                <button class="lang-btn" data-lang="zh-cn">简体中文</button>
                                <button class="lang-btn active" data-lang="zh-tw">繁體中文</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Generate Button -->
                <div class="generate-section">
                    <button id="generate-unified-notes" class="generate-mega-btn">
                        <i class="fas fa-magic"></i>
                        <span>🚀 生成統一學習筆記</span>
                        <small>整合所有資源生成完整筆記</small>
                    </button>
                </div>
            </section>

            <!-- Loading Indicator -->
            <div id="loading" class="loading" style="display:none;">
                <div class="spinner"></div>
                <p>AI正在生成筆記，請稍候...</p>
            </div>

            <!-- Output Section -->
            <section id="output-section" class="output-section" style="display:none;">
                <!-- View Toggle -->
                <div class="view-toggle">
                    <button class="view-btn active" data-view="notes">
                        <i class="fas fa-sticky-note"></i> 筆記
                    </button>
                    <button class="view-btn" data-view="mindmap">
                        <i class="fas fa-project-diagram"></i> 思維導圖
                    </button>
                    <button class="view-btn" data-view="flashcards">
                        <i class="fas fa-layer-group"></i> 記憶卡片
                    </button>
                    <button class="view-btn" data-view="quiz">
                        <i class="fas fa-question-circle"></i> 測驗
                    </button>
                </div>

                <!-- Enhanced Action Buttons -->
                <div class="action-buttons">
                    <!-- Language Switch -->
                    <div class="language-switch-group">
                        <label>🌐 切換語言：</label>
                        <button id="switch-to-en" class="lang-switch-btn" data-lang="en">English</button>
                        <button id="switch-to-zh-cn" class="lang-switch-btn" data-lang="zh-cn">简体</button>
                        <button id="switch-to-zh-tw" class="lang-switch-btn active" data-lang="zh-tw">繁體</button>
                    </div>
                    
                    <!-- Edit Mode Toggle -->
                    <button id="edit-mode-btn" class="action-btn edit-btn">
                        <i class="fas fa-edit"></i> 編輯模式
                    </button>
                    
                    <!-- Standard Actions -->
                    <button id="download-btn" class="action-btn">
                        <i class="fas fa-download"></i> 下載
                    </button>
                    <button id="copy-btn" class="action-btn">
                        <i class="fas fa-copy"></i> 複製
                    </button>
                    <button id="save-btn" class="action-btn">
                        <i class="fas fa-save"></i> 儲存
                    </button>
                </div>

                <!-- Notes View -->
                <div id="notes-view" class="view-content active">
                    <!-- Read Mode -->
                    <div id="notes-read-mode" class="notes-read-mode">
                        <div id="notes-content" class="notes-content"></div>
                    </div>
                    
                    <!-- Edit Mode -->
                    <div id="notes-edit-mode" class="notes-edit-mode" style="display: none;">
                        <div class="edit-toolbar">
                            <button id="save-edit-btn" class="toolbar-btn save-btn">
                                <i class="fas fa-save"></i> 保存更改
                            </button>
                            <button id="cancel-edit-btn" class="toolbar-btn cancel-btn">
                                <i class="fas fa-times"></i> 取消
                            </button>
                            <div class="edit-help">
                                <i class="fas fa-info-circle"></i>
                                支援 Markdown 格式編輯
                            </div>
                        </div>
                        <textarea id="notes-editor" class="notes-editor" placeholder="在此編輯您的筆記內容..."></textarea>
                        <div class="edit-preview">
                            <h4>預覽：</h4>
                            <div id="edit-preview-content" class="preview-content"></div>
                        </div>
                    </div>
                </div>

                <!-- Mindmap View -->
                <div id="mindmap-view" class="view-content">
                    <div id="mindmap-container" class="mindmap-container">
                        <svg id="mindmap-svg"></svg>
                    </div>
                </div>

                <!-- Flashcards View -->
                <div id="flashcards-view" class="view-content">
                    <div id="flashcards-container" class="flashcards-container"></div>
                </div>

                <!-- Quiz View -->
                <div id="quiz-view" class="view-content">
                    <div id="quiz-container" class="quiz-container"></div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 NexLearn. All rights reserved.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="js/app.js"></script>
    <script src="js/mindmap.js"></script>
</body>
</html>