<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NexLearn AI Á≠ÜË®òÁîüÊàêÂô®</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/unified-styles.css">
    <link rel="stylesheet" href="css/sidebar-styles.css">
    <link rel="stylesheet" href="css/modal-styles.css">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Markmap for mindmap -->
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdn.jsdelivr.net/npm/markmap-lib@0.15.3"></script>
    <script src="https://cdn.jsdelivr.net/npm/markmap-view@0.15.3"></script>
    
    <!-- Marked for markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <h1>NexLearn AI Á≠ÜË®òÁîüÊàêÂô®</h1>
                <span class="subtitle">Â∞á‰ªª‰ΩïÂÖßÂÆπËΩâÊèõÁÇ∫Êô∫ËÉΩÂ≠∏ÁøíÁ≠ÜË®ò</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h3>üìö NexLearn</h3>
                <button id="collapse-sidebar" class="collapse-btn">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>
            
            <!-- Quick Actions -->
            <div class="quick-actions">
                <button id="new-note-btn" class="quick-action-btn primary">
                    <i class="fas fa-plus"></i>
                    <span>Êñ∞Â¢ûÁ≠ÜË®ò</span>
                </button>
                <button id="new-flashcard-set-btn" class="quick-action-btn">
                    <i class="fas fa-layer-group"></i>
                    <span>Ë®òÊÜ∂Âç°ÈõÜ</span>
                </button>
                <button id="new-quiz-set-btn" class="quick-action-btn">
                    <i class="fas fa-question-circle"></i>
                    <span>Ê∏¨È©óÈõÜ</span>
                </button>
                <button id="open-canvas-btn" class="quick-action-btn">
                    <i class="fas fa-paint-brush"></i>
                    <span>Áï´Êùø</span>
                </button>
            </div>

            <!-- Navigation Menu -->
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-header">
                        <i class="fas fa-sticky-note"></i>
                        <span>Á≠ÜË®òÁÆ°ÁêÜ</span>
                        <button class="expand-btn"><i class="fas fa-chevron-down"></i></button>
                    </div>
                    <ul class="nav-list">
                        <li><a href="#" data-view="all-notes"><i class="fas fa-list"></i> ÂÖ®ÈÉ®Á≠ÜË®ò</a></li>
                        <li><a href="#" data-view="recent-notes"><i class="fas fa-clock"></i> ÊúÄËøëÊü•Áúã</a></li>
                        <li><a href="#" data-view="favorites"><i class="fas fa-star"></i> ÊàëÁöÑÊúÄÊÑõ</a></li>
                        <li><a href="#" data-view="trash"><i class="fas fa-trash"></i> ÂõûÊî∂Á´ô</a></li>
                    </ul>
                </div>

                <div class="nav-section">
                    <div class="nav-section-header">
                        <i class="fas fa-folder-tree"></i>
                        <span>Ë™≤Á®ãÂàÜÈ°û</span>
                        <button class="expand-btn"><i class="fas fa-chevron-down"></i></button>
                    </div>
                    <ul class="nav-list category-tree">
                        <!-- Â≠∏ÁßëÂàÜÈ°û -->
                        <li class="category-parent">
                            <a href="#" class="category-toggle">
                                <i class="fas fa-flask"></i> ÁßëÂ≠∏ Sciences
                                <i class="fas fa-chevron-right toggle-icon"></i>
                            </a>
                            <ul class="category-children">
                                <li><a href="#" data-category="chemistry"><i class="fas fa-atom"></i> ÂåñÂ≠∏ Chemistry</a></li>
                                <li><a href="#" data-category="physics"><i class="fas fa-satellite"></i> Áâ©ÁêÜ Physics</a></li>
                                <li><a href="#" data-category="biology"><i class="fas fa-dna"></i> ÁîüÁâ© Biology</a></li>
                            </ul>
                        </li>
                        <li class="category-parent">
                            <a href="#" class="category-toggle">
                                <i class="fas fa-calculator"></i> Êï∏Â≠∏ Mathematics
                                <i class="fas fa-chevron-right toggle-icon"></i>
                            </a>
                            <ul class="category-children">
                                <li><a href="#" data-category="pure-math"><i class="fas fa-infinity"></i> Á¥îÊï∏Â≠∏</a></li>
                                <li><a href="#" data-category="applied-math"><i class="fas fa-chart-line"></i> ÊáâÁî®Êï∏Â≠∏</a></li>
                                <li><a href="#" data-category="statistics"><i class="fas fa-chart-bar"></i> Áµ±Ë®àÂ≠∏</a></li>
                            </ul>
                        </li>
                        <li class="category-parent">
                            <a href="#" class="category-toggle">
                                <i class="fas fa-laptop-code"></i> ÊäÄË°ì Technology
                                <i class="fas fa-chevron-right toggle-icon"></i>
                            </a>
                            <ul class="category-children">
                                <li><a href="#" data-category="computer-science"><i class="fas fa-code"></i> Ë®àÁÆóÊ©üÁßëÂ≠∏</a></li>
                                <li><a href="#" data-category="engineering"><i class="fas fa-cogs"></i> Â∑•Á®ãÂ≠∏</a></li>
                            </ul>
                        </li>
                        <li class="category-parent">
                            <a href="#" class="category-toggle">
                                <i class="fas fa-building-columns"></i> ‰∫∫ÊñáÁ§æÁßë
                                <i class="fas fa-chevron-right toggle-icon"></i>
                            </a>
                            <ul class="category-children">
                                <li><a href="#" data-category="literature"><i class="fas fa-book"></i> ÊñáÂ≠∏</a></li>
                                <li><a href="#" data-category="history"><i class="fas fa-monument"></i> Ê≠∑Âè≤</a></li>
                                <li><a href="#" data-category="business"><i class="fas fa-briefcase"></i> ÂïÜÊ•≠</a></li>
                                <li><a href="#" data-category="languages"><i class="fas fa-language"></i> Ë™ûË®ÄÂ≠∏Áøí</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <div class="nav-section-header">
                        <i class="fas fa-graduation-cap"></i>
                        <span>ËÄÉË©¶Á≥ªÁµ±</span>
                        <button class="expand-btn"><i class="fas fa-chevron-down"></i></button>
                    </div>
                    <ul class="nav-list exam-categories">
                        <li class="exam-parent">
                            <a href="#" class="exam-toggle">
                                <i class="fas fa-globe"></i> ÂúãÈöõË™≤Á®ã
                                <i class="fas fa-chevron-right toggle-icon"></i>
                            </a>
                            <ul class="exam-children">
                                <li><a href="#" data-exam="ibdp"><i class="fas fa-medal"></i> IB DP</a></li>
                                <li><a href="#" data-exam="ial"><i class="fas fa-certificate"></i> IAL</a></li>
                                <li><a href="#" data-exam="ias"><i class="fas fa-award"></i> IAS</a></li>
                                <li><a href="#" data-exam="al"><i class="fas fa-trophy"></i> A Level</a></li>
                                <li><a href="#" data-exam="as"><i class="fas fa-star"></i> AS Level</a></li>
                            </ul>
                        </li>
                        <li class="exam-parent">
                            <a href="#" class="exam-toggle">
                                <i class="fas fa-school"></i> Ëã±ÂºèË™≤Á®ã
                                <i class="fas fa-chevron-right toggle-icon"></i>
                            </a>
                            <ul class="exam-children">
                                <li><a href="#" data-exam="gcse"><i class="fas fa-book-open"></i> GCSE</a></li>
                                <li><a href="#" data-exam="igcse"><i class="fas fa-globe-europe"></i> IGCSE</a></li>
                            </ul>
                        </li>
                        <li class="exam-parent">
                            <a href="#" class="exam-toggle">
                                <i class="fas fa-flag"></i> ÁæéÂºèË™≤Á®ã
                                <i class="fas fa-chevron-right toggle-icon"></i>
                            </a>
                            <ul class="exam-children">
                                <li><a href="#" data-exam="ap"><i class="fas fa-university"></i> AP</a></li>
                                <li><a href="#" data-exam="sat"><i class="fas fa-pencil-alt"></i> SAT</a></li>
                            </ul>
                        </li>
                        <li class="exam-parent">
                            <a href="#" class="exam-toggle">
                                <i class="fas fa-map-marker-alt"></i> Âú∞ÂçÄË™≤Á®ã
                                <i class="fas fa-chevron-right toggle-icon"></i>
                            </a>
                            <ul class="exam-children">
                                <li><a href="#" data-exam="hkdse"><i class="fas fa-city"></i> HKDSE</a></li>
                            </ul>
                        </li>
                        <li class="exam-parent">
                            <a href="#" class="exam-toggle">
                                <i class="fas fa-comments"></i> Ë™ûË®ÄÊ∏¨Ë©¶
                                <i class="fas fa-chevron-right toggle-icon"></i>
                            </a>
                            <ul class="exam-children">
                                <li><a href="#" data-exam="ielts"><i class="fas fa-microphone"></i> IELTS</a></li>
                                <li><a href="#" data-exam="toefl"><i class="fas fa-headphones"></i> TOEFL</a></li>
                            </ul>
                        </li>
                        <li><a href="#" data-exam="others"><i class="fas fa-ellipsis-h"></i> ÂÖ∂‰ªñËÄÉË©¶</a></li>
                    </ul>
                </div>

                <div class="nav-section">
                    <div class="nav-section-header">
                        <i class="fas fa-layer-group"></i>
                        <span>Â≠∏ÁøíÂ∑•ÂÖ∑</span>
                        <button class="expand-btn"><i class="fas fa-chevron-down"></i></button>
                    </div>
                    <ul class="nav-list">
                        <li><a href="#" data-view="flashcard-sets"><i class="fas fa-cards-blank"></i> Ë®òÊÜ∂Âç°ÈõÜ</a></li>
                        <li><a href="#" data-view="quiz-sets"><i class="fas fa-list-check"></i> Ê∏¨È©óÈõÜ</a></li>
                        <li><a href="#" data-view="mindmaps"><i class="fas fa-project-diagram"></i> ÊÄùÁ∂≠Â∞éÂúñ</a></li>
                        <li><a href="#" data-view="canvases"><i class="fas fa-paint-brush"></i> Áï´ÊùøÈõÜÂêà</a></li>
                    </ul>
                </div>
            </nav>

            <!-- Sidebar Footer -->
            <div class="sidebar-footer">
                <div class="storage-info">
                    <i class="fas fa-database"></i>
                    <span>Â∑≤Áî®Á©∫Èñì: 2.3GB / 10GB</span>
                </div>
                <button class="settings-btn">
                    <i class="fas fa-cog"></i>
                    Ë®≠ÁΩÆ
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <div class="main-container">
            <!-- Welcome Screen -->
            <div id="welcome-screen" class="welcome-screen">
                <div class="welcome-content">
                    <div class="welcome-hero">
                        <i class="fas fa-graduation-cap welcome-icon"></i>
                        <h1>Ê≠°Ëøé‰ΩøÁî® NexLearn AI Á≠ÜË®òÁ≥ªÁµ±</h1>
                        <p>Êô∫ËÉΩÂ≠∏ÁøíÁ≠ÜË®òÁîüÊàê ‚Ä¢ Â§öÊ∫êÂÖßÂÆπÊï¥Âêà ‚Ä¢ ÂÄã‰∫∫Áü•Ë≠òÂ∫´ÁÆ°ÁêÜ</p>
                    </div>
                    
                    <div class="welcome-stats">
                        <div class="stat-card">
                            <i class="fas fa-sticky-note"></i>
                            <div class="stat-info">
                                <span class="stat-number">0</span>
                                <span class="stat-label">Á≠ÜË®ò</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-layer-group"></i>
                            <div class="stat-info">
                                <span class="stat-number">0</span>
                                <span class="stat-label">Ë®òÊÜ∂Âç°ÈõÜ</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-question-circle"></i>
                            <div class="stat-info">
                                <span class="stat-number">0</span>
                                <span class="stat-label">Ê∏¨È©óÈõÜ</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-paint-brush"></i>
                            <div class="stat-info">
                                <span class="stat-number">0</span>
                                <span class="stat-label">Áï´Êùø</span>
                            </div>
                        </div>
                    </div>

                    <div class="welcome-actions">
                        <button class="welcome-action-btn primary" onclick="openNewNoteModal()">
                            <i class="fas fa-plus"></i>
                            <span>Âª∫Á´ãÁ¨¨‰∏ÄÂÄãÁ≠ÜË®ò</span>
                        </button>
                        <button class="welcome-action-btn" onclick="showTutorial()">
                            <i class="fas fa-play"></i>
                            <span>ËßÄÁúãÊïôÂ≠∏ÂΩ±Áâá</span>
                        </button>
                    </div>

                    <div class="recent-activity">
                        <h3>üìö ÈñãÂßãÊÇ®ÁöÑÂ≠∏Áøí‰πãÊóÖ</h3>
                        <div class="activity-grid">
                            <div class="activity-item">
                                <i class="fas fa-youtube"></i>
                                <div>
                                    <h4>YouTube ÂΩ±ÁâáËΩâÁ≠ÜË®ò</h4>
                                    <p>ÂæûÊïôÂ≠∏ÂΩ±ÁâáÂø´ÈÄüÁîüÊàêÁµêÊßãÂåñÁ≠ÜË®ò</p>
                                </div>
                            </div>
                            <div class="activity-item">
                                <i class="fas fa-file-pdf"></i>
                                <div>
                                    <h4>PDF Êñá‰ª∂ËôïÁêÜ</h4>
                                    <p>‰∏äÂÇ≥ÊïôÁßëÊõ∏„ÄÅË´ñÊñáËá™ÂãïÊèêÂèñË¶ÅÈªû</p>
                                </div>
                            </div>
                            <div class="activity-item">
                                <i class="fas fa-brain"></i>
                                <div>
                                    <h4>AI Êô∫ËÉΩÊï¥Âêà</h4>
                                    <p>Â§öÊ∫êÂÖßÂÆπÊô∫ËÉΩÊï¥ÂêàÊàêÂÆåÊï¥Áü•Ë≠òÈ´îÁ≥ª</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notes List View -->
            <div id="notes-list-view" class="content-view" style="display: none;">
                <div class="view-header">
                    <h2><i class="fas fa-sticky-note"></i> ÂÖ®ÈÉ®Á≠ÜË®ò</h2>
                    <div class="view-actions">
                        <button class="action-btn" onclick="openNewNoteModal()">
                            <i class="fas fa-plus"></i> Êñ∞Â¢ûÁ≠ÜË®ò
                        </button>
                        <div class="search-box">
                            <input type="text" placeholder="ÊêúÂ∞ãÁ≠ÜË®ò..." />
                            <i class="fas fa-search"></i>
                        </div>
                    </div>
                </div>
                <div class="notes-grid" id="notes-grid">
                    <!-- Notes will be populated here -->
                </div>
            </div>

            <!-- Flashcard Sets View -->
            <div id="flashcard-sets-view" class="content-view" style="display: none;">
                <div class="view-header">
                    <h2><i class="fas fa-layer-group"></i> Ë®òÊÜ∂Âç°ÈõÜ</h2>
                    <div class="view-actions">
                        <button class="action-btn" onclick="openNewFlashcardSetModal()">
                            <i class="fas fa-plus"></i> Êñ∞Â¢ûÂç°ÈõÜ
                        </button>
                    </div>
                </div>
                <div class="flashcard-sets-grid" id="flashcard-sets-grid">
                    <!-- Flashcard sets will be populated here -->
                </div>
            </div>

            <!-- Quiz Sets View -->
            <div id="quiz-sets-view" class="content-view" style="display: none;">
                <div class="view-header">
                    <h2><i class="fas fa-question-circle"></i> Ê∏¨È©óÈõÜ</h2>
                    <div class="view-actions">
                        <button class="action-btn" onclick="openNewQuizSetModal()">
                            <i class="fas fa-plus"></i> Êñ∞Â¢ûÊ∏¨È©ó
                        </button>
                    </div>
                </div>
                <div class="quiz-sets-grid" id="quiz-sets-grid">
                    <!-- Quiz sets will be populated here -->
                </div>
            </div>

            <!-- Canvas View -->
            <div id="canvas-view" class="content-view" style="display: none;">
                <div class="view-header">
                    <h2><i class="fas fa-paint-brush"></i> Âçî‰ΩúÁï´Êùø</h2>
                    <div class="view-actions">
                        <button class="action-btn" onclick="openNewCanvas()">
                            <i class="fas fa-plus"></i> Êñ∞Â¢ûÁï´Êùø
                        </button>
                    </div>
                </div>
                <div class="canvas-container" id="canvas-container">
                    <!-- Canvas will be populated here -->
                </div>
            </div>

            <div class="container" style="display: none;">
            <!-- Modern Unified Input Section (Hidden by default, shown in modal) -->
            <section class="unified-input-section">
                <!-- Header with Course Selection -->
                <div class="course-header">
                    <div class="course-selection">
                        <label for="course-select">üìö Ë™≤Á®ãÂàÜÈ°ûÔºö</label>
                        <select id="course-select" class="course-dropdown">
                            <option value="">ÈÅ∏ÊìáË™≤Á®ãÈ°ûÂà•...</option>
                            <option value="chemistry">üß™ ÂåñÂ≠∏ Chemistry</option>
                            <option value="physics">‚öóÔ∏è Áâ©ÁêÜ Physics</option>
                            <option value="biology">üß¨ ÁîüÁâ© Biology</option>
                            <option value="mathematics">üìä Êï∏Â≠∏ Mathematics</option>
                            <option value="computer-science">üíª Ë®àÁÆóÊ©üÁßëÂ≠∏ Computer Science</option>
                            <option value="business">üíº ÂïÜÊ•≠ Business</option>
                            <option value="literature">üìñ ÊñáÂ≠∏ Literature</option>
                            <option value="history">üèõÔ∏è Ê≠∑Âè≤ History</option>
                            <option value="languages">üåê Ë™ûË®ÄÂ≠∏Áøí Languages</option>
                            <option value="other">üìã ÂÖ∂‰ªñ Other</option>
                        </select>
                    </div>
                    
                    <div class="note-title">
                        <label for="note-title-input">üìù Á≠ÜË®òÊ®ôÈ°åÔºö</label>
                        <input type="text" id="note-title-input" class="title-input" placeholder="Ëº∏ÂÖ•Á≠ÜË®òÊ®ôÈ°å...">
                    </div>
                </div>

                <!-- Upload Sources Area -->
                <div class="upload-sources-area">
                    <h3>üì§ ‰∏äÂÇ≥Â≠∏ÁøíË≥áÊ∫ê</h3>
                    <div class="sources-container">
                        <!-- YouTube Sources -->
                        <div class="source-group">
                            <div class="source-header">
                                <i class="fab fa-youtube youtube-icon"></i>
                                <span>YouTube ÂΩ±Áâá</span>
                                <button class="add-source-btn" data-type="youtube">+ Ê∑ªÂä†</button>
                            </div>
                            <div id="youtube-sources" class="sources-list">
                                <div class="source-item">
                                    <input type="text" class="youtube-url-input" placeholder="Ë≤º‰∏ä YouTube ÂΩ±ÁâáÁ∂≤ÂùÄ...">
                                    <button class="remove-source-btn">√ó</button>
                                </div>
                            </div>
                        </div>

                        <!-- File Sources -->
                        <div class="source-group">
                            <div class="source-header">
                                <i class="fas fa-file-upload file-icon"></i>
                                <span>Êñá‰ª∂‰∏äÂÇ≥</span>
                                <button class="add-source-btn" data-type="file">+ Ê∑ªÂä†</button>
                            </div>
                            <div class="file-upload-zone">
                                <input type="file" id="file-input" multiple accept=".pdf,.doc,.docx,.ppt,.pptx,.txt,.md,.mp3,.m4a,.wav,.jpg,.jpeg,.png" hidden>
                                <label for="file-input" class="file-drop-area">
                                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                                    <div class="upload-text">
                                        <strong>ÈªûÊìäÈÅ∏ÊìáÊñá‰ª∂ÊàñÊãñÊîæÂà∞Ê≠§Ëôï</strong>
                                        <p>ÊîØÊè¥ÔºöPDF, DOC, PPT, TXT, MD, MP3, M4A, WAV, ÂúñÁâá</p>
                                    </div>
                                </label>
                                <div id="file-list" class="file-list"></div>
                            </div>
                        </div>

                        <!-- Text Sources -->
                        <div class="source-group">
                            <div class="source-header">
                                <i class="fas fa-align-left text-icon"></i>
                                <span>ÊñáÂ≠óÂÖßÂÆπ</span>
                                <button class="add-source-btn" data-type="text">+ Ê∑ªÂä†</button>
                            </div>
                            <div id="text-sources" class="sources-list">
                                <div class="source-item">
                                    <textarea class="text-content-input" placeholder="Ë≤º‰∏äÊàñËº∏ÂÖ•ÊñáÂ≠óÂÖßÂÆπ..." rows="4"></textarea>
                                    <button class="remove-source-btn">√ó</button>
                                </div>
                            </div>
                        </div>

                        <!-- Webpage Sources -->
                        <div class="source-group">
                            <div class="source-header">
                                <i class="fas fa-globe web-icon"></i>
                                <span>Á∂≤È†ÅÈÄ£Áµê</span>
                                <button class="add-source-btn" data-type="webpage">+ Ê∑ªÂä†</button>
                            </div>
                            <div id="webpage-sources" class="sources-list">
                                <div class="source-item">
                                    <input type="text" class="webpage-url-input" placeholder="Ë≤º‰∏äÁ∂≤È†ÅÈÄ£Áµê...">
                                    <button class="remove-source-btn">√ó</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Section -->
                <div class="generation-settings">
                    <div class="settings-row">
                        <!-- Detail Level -->
                        <div class="setting-group">
                            <label>üéØ Ë©≥Á¥∞Á®ãÂ∫¶Ôºö</label>
                            <div class="detail-buttons">
                                <button class="detail-btn" data-level="brief">Á∞°Ë¶Å</button>
                                <button class="detail-btn active" data-level="medium">ÈÅ©‰∏≠</button>
                                <button class="detail-btn" data-level="detailed">Ë©≥Á¥∞</button>
                            </div>
                        </div>

                        <!-- Language Selection -->
                        <div class="setting-group">
                            <label>üåê Ëº∏Âá∫Ë™ûË®ÄÔºö</label>
                            <div class="language-buttons">
                                <button class="lang-btn" data-lang="en">English</button>
                                <button class="lang-btn" data-lang="zh-cn">ÁÆÄ‰Ωì‰∏≠Êñá</button>
                                <button class="lang-btn active" data-lang="zh-tw">ÁπÅÈ´î‰∏≠Êñá</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Generate Button -->
                <div class="generate-section">
                    <button id="generate-unified-notes" class="generate-mega-btn">
                        <i class="fas fa-magic"></i>
                        <span>üöÄ ÁîüÊàêÁµ±‰∏ÄÂ≠∏ÁøíÁ≠ÜË®ò</span>
                        <small>Êï¥ÂêàÊâÄÊúâË≥áÊ∫êÁîüÊàêÂÆåÊï¥Á≠ÜË®ò</small>
                    </button>
                </div>
            </section>

            <!-- Loading Indicator -->
            <div id="loading" class="loading" style="display:none;">
                <div class="spinner"></div>
                <p>AIÊ≠£Âú®ÁîüÊàêÁ≠ÜË®òÔºåË´ãÁ®çÂÄô...</p>
            </div>

            <!-- Output Section -->
            <section id="output-section" class="output-section" style="display:none;">
                <!-- View Toggle -->
                <div class="view-toggle">
                    <button class="view-btn active" data-view="notes">
                        <i class="fas fa-sticky-note"></i> Á≠ÜË®ò
                    </button>
                    <button class="view-btn" data-view="mindmap">
                        <i class="fas fa-project-diagram"></i> ÊÄùÁ∂≠Â∞éÂúñ
                    </button>
                    <button class="view-btn" data-view="flashcards">
                        <i class="fas fa-layer-group"></i> Ë®òÊÜ∂Âç°Áâá
                    </button>
                    <button class="view-btn" data-view="quiz">
                        <i class="fas fa-question-circle"></i> Ê∏¨È©ó
                    </button>
                </div>

                <!-- Enhanced Action Buttons -->
                <div class="action-buttons">
                    <!-- Language Switch -->
                    <div class="language-switch-group">
                        <label>üåê ÂàáÊèõË™ûË®ÄÔºö</label>
                        <button id="switch-to-en" class="lang-switch-btn" data-lang="en">English</button>
                        <button id="switch-to-zh-cn" class="lang-switch-btn" data-lang="zh-cn">ÁÆÄ‰Ωì</button>
                        <button id="switch-to-zh-tw" class="lang-switch-btn active" data-lang="zh-tw">ÁπÅÈ´î</button>
                    </div>
                    
                    <!-- Edit Mode Toggle -->
                    <button id="edit-mode-btn" class="action-btn edit-btn">
                        <i class="fas fa-edit"></i> Á∑®ËºØÊ®°Âºè
                    </button>
                    
                    <!-- Standard Actions -->
                    <button id="download-btn" class="action-btn">
                        <i class="fas fa-download"></i> ‰∏ãËºâ
                    </button>
                    <button id="copy-btn" class="action-btn">
                        <i class="fas fa-copy"></i> Ë§áË£Ω
                    </button>
                    <button id="save-btn" class="action-btn">
                        <i class="fas fa-save"></i> ÂÑ≤Â≠ò
                    </button>
                </div>

                <!-- Notes View -->
                <div id="notes-view" class="view-content active">
                    <!-- Read Mode -->
                    <div id="notes-read-mode" class="notes-read-mode">
                        <div id="notes-content" class="notes-content"></div>
                    </div>
                    
                    <!-- Edit Mode -->
                    <div id="notes-edit-mode" class="notes-edit-mode" style="display: none;">
                        <div class="edit-toolbar">
                            <button id="save-edit-btn" class="toolbar-btn save-btn">
                                <i class="fas fa-save"></i> ‰øùÂ≠òÊõ¥Êîπ
                            </button>
                            <button id="cancel-edit-btn" class="toolbar-btn cancel-btn">
                                <i class="fas fa-times"></i> ÂèñÊ∂à
                            </button>
                            <div class="edit-help">
                                <i class="fas fa-info-circle"></i>
                                ÊîØÊè¥ Markdown Ê†ºÂºèÁ∑®ËºØ
                            </div>
                        </div>
                        <textarea id="notes-editor" class="notes-editor" placeholder="Âú®Ê≠§Á∑®ËºØÊÇ®ÁöÑÁ≠ÜË®òÂÖßÂÆπ..."></textarea>
                        <div class="edit-preview">
                            <h4>È†êË¶ΩÔºö</h4>
                            <div id="edit-preview-content" class="preview-content"></div>
                        </div>
                    </div>
                </div>

                <!-- Mindmap View -->
                <div id="mindmap-view" class="view-content">
                    <div id="mindmap-container" class="mindmap-container">
                        <svg id="mindmap-svg"></svg>
                    </div>
                </div>

                <!-- Flashcards View -->
                <div id="flashcards-view" class="view-content">
                    <div id="flashcards-container" class="flashcards-container"></div>
                </div>

                <!-- Quiz View -->
                <div id="quiz-view" class="view-content">
                    <div id="quiz-container" class="quiz-container"></div>
                </div>
            </section>
        </div>
    </main>

    <!-- New Note Creation Modal -->
    <div id="new-note-modal" class="modal" style="display: none;">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2><i class="fas fa-plus"></i> Âª∫Á´ãÊñ∞Á≠ÜË®ò</h2>
                <button class="modal-close" onclick="closeNewNoteModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- The unified input section will be moved here via JS -->
                <div id="modal-unified-input"></div>
            </div>
        </div>
    </div>

    <!-- Flashcard Set Creation Modal -->
    <div id="flashcard-set-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-layer-group"></i> Âª∫Á´ãË®òÊÜ∂Âç°ÈõÜ</h2>
                <button class="modal-close" onclick="closeFlashcardSetModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="flashcard-creation">
                    <div class="creation-options">
                        <div class="option-card active" data-mode="ai-generate">
                            <i class="fas fa-robot"></i>
                            <h3>AI Ëá™ÂãïÁîüÊàê</h3>
                            <p>ÂæûÁ≠ÜË®òÂÖßÂÆπËá™ÂãïÁîüÊàêË®òÊÜ∂Âç°Áâá</p>
                        </div>
                        <div class="option-card" data-mode="manual-create">
                            <i class="fas fa-hand-paper"></i>
                            <h3>ÊâãÂãïÂª∫Á´ã</h3>
                            <p>Ëá™Â∑±Ë®≠Ë®àÂç°ÁâáÂÖßÂÆπÂíåÁ≠îÊ°à</p>
                        </div>
                        <div class="option-card" data-mode="hybrid">
                            <i class="fas fa-balance-scale"></i>
                            <h3>Ê∑∑ÂêàÊ®°Âºè</h3>
                            <p>AI ÁîüÊàêÂæåÂèØÁ∑®ËºØË™øÊï¥</p>
                        </div>
                    </div>

                    <!-- AI Generation Settings -->
                    <div id="ai-generate-mode" class="creation-mode active">
                        <div class="source-selection">
                            <label>ÈÅ∏ÊìáÁ≠ÜË®ò‰æÜÊ∫êÔºö</label>
                            <select id="note-source-select" class="form-select">
                                <option value="">ÈÅ∏ÊìáÁèæÊúâÁ≠ÜË®ò...</option>
                            </select>
                        </div>
                        
                        <div class="generation-settings">
                            <div class="setting-group">
                                <label>Âç°ÁâáÊï∏ÈáèÔºö</label>
                                <select id="card-count" class="form-select">
                                    <option value="10">10Âºµ</option>
                                    <option value="20" selected>20Âºµ</option>
                                    <option value="30">30Âºµ</option>
                                </select>
                            </div>
                            
                            <div class="setting-group">
                                <label>Èõ£Â∫¶Á≠âÁ¥öÔºö</label>
                                <div class="difficulty-buttons">
                                    <button class="difficulty-btn" data-level="easy">Á∞°ÂñÆ</button>
                                    <button class="difficulty-btn active" data-level="medium">ÈÅ©‰∏≠</button>
                                    <button class="difficulty-btn" data-level="hard">Âõ∞Èõ£</button>
                                </div>
                            </div>
                        </div>

                        <div class="ai-options">
                            <label class="checkbox-label">
                                <input type="checkbox" id="allow-editing" checked>
                                <span>‚úÖ ÁîüÊàêÂæåÂÖÅË®±Á∑®ËºØ</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="save-unedited">
                                <span>üíæ ‰øùÁïô AI ÂéüÂßãÁâàÊú¨</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="modal-actions">
                    <button class="btn-secondary" onclick="closeFlashcardSetModal()">ÂèñÊ∂à</button>
                    <button class="btn-primary" onclick="createFlashcardSet()">
                        <i class="fas fa-magic"></i> Âª∫Á´ãË®òÊÜ∂Âç°ÈõÜ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Quiz Set Creation Modal -->
    <div id="quiz-set-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-question-circle"></i> Âª∫Á´ãÊ∏¨È©óÈõÜ</h2>
                <button class="modal-close" onclick="closeQuizSetModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="quiz-creation">
                    <div class="quiz-settings">
                        <div class="setting-row">
                            <div class="setting-group">
                                <label>È°åÁõÆÊï∏ÈáèÔºö</label>
                                <select id="quiz-count" class="form-select">
                                    <option value="5">5È°å</option>
                                    <option value="10" selected>10È°å</option>
                                    <option value="15">15È°å</option>
                                </select>
                            </div>
                            
                            <div class="setting-group">
                                <label>‰æÜÊ∫êÁ≠ÜË®òÔºö</label>
                                <select id="quiz-source-select" class="form-select">
                                    <option value="">ÈÅ∏ÊìáÁ≠ÜË®ò...</option>
                                </select>
                            </div>
                        </div>

                        <div class="quiz-options">
                            <label class="checkbox-label">
                                <input type="checkbox" id="quiz-allow-editing" checked>
                                <span>ÂÖÅË®±ÁîüÊàêÂæåÁ∑®ËºØÈ°åÁõÆ</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="quiz-save-original">
                                <span>‰øùÁïô AI ÂéüÂßãÁâàÊú¨</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="modal-actions">
                    <button class="btn-secondary" onclick="closeQuizSetModal()">ÂèñÊ∂à</button>
                    <button class="btn-primary" onclick="createQuizSet()">
                        <i class="fas fa-magic"></i> Âª∫Á´ãÊ∏¨È©óÈõÜ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Canvas/Whiteboard Modal -->
    <div id="canvas-modal" class="modal" style="display: none;">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2><i class="fas fa-paint-brush"></i> Âçî‰ΩúÁï´Êùø</h2>
                <button class="modal-close" onclick="closeCanvasModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="canvas-workspace">
                    <div class="canvas-toolbar">
                        <div class="tool-group">
                            <button class="tool-btn active" data-tool="pen">
                                <i class="fas fa-pen"></i> Á≠Ü
                            </button>
                            <button class="tool-btn" data-tool="eraser">
                                <i class="fas fa-eraser"></i> Ê©°ÁöÆÊì¶
                            </button>
                            <button class="tool-btn" data-tool="text">
                                <i class="fas fa-font"></i> ÊñáÂ≠ó
                            </button>
                        </div>
                        
                        <div class="tool-group">
                            <input type="color" id="color-picker" value="#000000">
                            <input type="range" id="brush-size" min="1" max="20" value="3">
                        </div>
                        
                        <div class="tool-group">
                            <button class="tool-btn" onclick="clearCanvas()">
                                <i class="fas fa-trash"></i> Ê∏ÖÈô§
                            </button>
                            <button class="tool-btn" onclick="saveCanvas()">
                                <i class="fas fa-save"></i> ‰øùÂ≠ò
                            </button>
                        </div>
                    </div>
                    
                    <div class="canvas-area">
                        <canvas id="whiteboard-canvas" width="800" height="600"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 NexLearn. All rights reserved.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="js/app.js"></script>
    <script src="js/mindmap.js"></script>
    <script src="js/sidebar.js"></script>
    <script src="js/modals.js"></script>
    <script src="js/flashcards.js"></script>
    <script src="js/quizzes.js"></script>
    <script src="js/canvas.js"></script>
</body>
</html>